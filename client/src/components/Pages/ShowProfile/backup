import React, {Component} from 'react';
import "../../../css/ShowProfile.css"
import { createHashHistory } from 'history';
import {adminService} from '../../../service/AdminService'
import {ProfileService} from "../../../service/ProfileService";
import {Link} from "react-router-dom";
import Navbar from "../../Navbar/Navbar";
import Back from "../../Back/Back";

const history = createHashHistory();

class ShowProfile extends Component{
    hentet = this.props.match.params.userID;
    user_id = this.props.match.params.userID;

    constructor(props) {
        super(props);
        this.state = {user: {name: "aaaasdasda"}}

    }

    componentDidMount() {
        console.log(this.hentet);
        let profileService = new ProfileService();
        profileService.getUser(this.user_id)
            .then(user =>
                this.setState({
                    user: user
                })

            )
            .catch((error) => {
                console.error(error);
            });
        console.log("SE ME " + this.state.user)
    };

    componentDidUpdate(prevProps) {
        if(this.props !== prevProps){
            let profileService = new ProfileService();
            profileService.getUser(this.user_id).then(user => this.setState({user: user}))
        }
    }


    render(){


        return(
            <div>
                <Navbar/>
                <Back/>
                <div id="ShowProfileDiv">
                    <h1>Min profil</h1>
                    <div id="ShowProfileText">
                        <h4>Brukernavn: {this.state.user.name}</h4>
                        <h4>tlf: {this.state.user.phone}</h4>
                        <h4>E-mail: {this.state.user.email}</h4>
                    </div>

                    <div id="ShowProfileButtonDiv">
                        <div id="ShowProfileBtn">
                            <button type="button" className="btn btn-info btn-lg" onClick={() => this.editProfile(this.user_id)}>Endre profil</button>
                        </div>
                    </div>

                </div>
            </div>
        )
    }

    editProfile(id){

        history.push("/profile/"+ id + "/edit")
    }

}

export default ShowProfile;